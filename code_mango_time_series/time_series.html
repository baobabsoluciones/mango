<!DOCTYPE html>
<html lang="en" data-accent-color="violet" data-content_root="../">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Time series - mango 0.2.3a1 documentation</title><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Utils" href="utils.html" /><link rel="prev" title="Mango time series code" href="index.html" /><script>
    function setColorMode(t){let e=document.documentElement;e.setAttribute("data-color-mode",t);let a=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,s=t;"auto"===t&&(s=a?"dark":"light"),"light"===s?(e.classList.remove("dark"),e.classList.add("light")):(e.classList.remove("light"),e.classList.add("dark"))}
    setColorMode(localStorage._theme||"auto");
  </script><link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=397bb51e" />
    <link rel="stylesheet" type="text/css" href="../_static/shibuya.css?v=76b6f612" />
    <link media="print" rel="stylesheet" type="text/css" href="../_static/print.css?v=20ff2c19" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --sy-f-text: "Inter", var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
  --sy-f-heading: "Inter", var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
}
</style>
    <meta property="og:type" content="website"/><meta property="og:title" content="Time series"/>
<meta name="twitter:card" content="summary"/>
  </head>
<body><div class="sy-head">
  <div class="sy-head-blur"></div>
  <div class="sy-head-inner sy-container mx-auto">
    <a class="sy-head-brand" href="../index.html">
      
      
      <strong>mango</strong>
    </a>
    <div class="sy-head-nav" id="head-nav">
      <nav class="sy-head-links"></nav>
      <div class="sy-head-extra flex items-center print:hidden"><form class="searchbox flex items-center" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <kbd>/</kbd>
</form><div class="sy-head-socials"></div></div>
    </div>
    <div class="sy-head-actions flex items-center shrink-0 print:hidden"><button class="js-theme theme-switch flex items-center"
data-aria-auto="Switch to light color mode"
data-aria-light="Switch to dark color mode"
data-aria-dark="Switch to auto color mode">
<i class="i-lucide theme-icon"></i>
</button><button class="md:hidden flex items-center js-menu" aria-label="Menu" type="button" aria-controls="head-nav" aria-expanded="false">
        <div class="hamburger">
          <span class="hamburger_1"></span>
          <span class="hamburger_2 -translate-x-2"></span>
          <span class="hamburger_3 -translate-x-1"></span>
        </div>
      </button>
    </div>
  </div>
</div>
<div class="sy-page sy-container flex mx-auto">
  <aside id="lside" class="sy-lside md:w-72 md:shrink-0 print:hidden">
    <div class="sy-lside-inner md:sticky">
      <div class="sy-scrollbar p-6">
        <div class="globaltoc" data-expand-depth="0"><p class="caption" role="heading" aria-level="3"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../readme.html">Mango</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html#overview">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html#quick-start">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../readme.html#support">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog/index.html">Changelogs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_changelog.html">mango</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_changelog.html#unreleased">[Unreleased]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_changelog.html#added">Added</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_changelog.html#changed">Changed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_changelog.html#fixed">Fixed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_time_series_changelog.html">mango-time-series</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_time_series_changelog.html#unreleased">[Unreleased]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_time_series_changelog.html#added">Added</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_time_series_changelog.html#changed">Changed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_time_series_changelog.html#id1">Added</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_time_series_changelog.html#features">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_autoencoder_changelog.html">mango-autoencoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_autoencoder_changelog.html#unreleased">[Unreleased]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_autoencoder_changelog.html#added">Added</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_autoencoder_changelog.html#changed">Changed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_autoencoder_changelog.html#id1">Added</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_autoencoder_changelog.html#features">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_calendar_changelog.html">mango-calendar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_calendar_changelog.html#unreleased">[Unreleased]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_calendar_changelog.html#added">Added</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_calendar_changelog.html#changed">Changed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_calendar_changelog.html#id1">Added</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_calendar_changelog.html#features">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_dashboard_changelog.html">mango-dashboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_dashboard_changelog.html#unreleased">[Unreleased]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_dashboard_changelog.html#added">Added</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_dashboard_changelog.html#changed">Changed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_dashboard_changelog.html#id1">Added</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_dashboard_changelog.html#features">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_genetic_changelog.html">mango-genetic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_genetic_changelog.html#unreleased">[Unreleased]</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_genetic_changelog.html#added">Added</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_genetic_changelog.html#changed">Changed</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_genetic_changelog.html#id1">Added</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/mango_genetic_changelog.html#features">Features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../code_mango/index.html">Mango code</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../code_mango/benchmark.html">Benchmarks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_mango/clients.html">Clients</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_mango/config.html">Config</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_mango/decodoc.html">Decodoc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_mango/logging.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_mango/models.html">Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_mango/processing.html">Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_mango/shap_analysis.html">SHAP Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_mango/shared.html">Shared Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_mango/table.html">Table</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Mango time series code</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Time series</a></li>
<li class="toctree-l2"><a class="reference internal" href="utils.html">Utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="data.html">Data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../code_autoencoder/index.html">Mango autoencoder code</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../code_autoencoder/autoencoder.html">Autoencoder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_autoencoder/autoencoder_api.html">AutoEncoder API Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../code_autoencoder/modules.html">AutoEncoder Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../code_autoencoder/utils.html">AutoEncoder Utils</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../code_autoencoder/modules.html">AutoEncoder Modules</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_autoencoder/utils.html">AutoEncoder Utils</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../code_mango_calendar/index.html">Mango calendar code</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../code_mango_calendar/mango_calendar.html">Calendar Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_mango_calendar/mango_calendar.html#module-mango_calendar.date_utils">Date Utils</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../code_mango_dashboard/index.html">Mango dashboard</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../code_mango_dashboard/file_explorer.html">File Explorer Dashboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_mango_dashboard/time_series.html">Time Series Dashboard</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../code_mango_genetic/index.html">Mango genetic</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../code_mango_genetic/introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_mango_genetic/individual.html">Individual</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_mango_genetic/population.html">Population</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_mango_genetic/selection.html">Selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_mango_genetic/crossover.html">Crossover</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_mango_genetic/mutation.html">Mutation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_mango_genetic/replacement.html">Replacement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_mango_genetic/stop.html">Stop conditions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_mango_genetic/config.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_mango_genetic/usage.html">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../code_mango_genetic/code.html">Genetic</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bib.html">Bibliography</a></li>
</ul>

        </div>
      </div>
    </div>
  </aside>
  <div class="lside-overlay js-menu" role="button" aria-label="Close left sidebar" aria-controls="lside" aria-expanded="false"></div>
  <aside id="rside" class="sy-rside pb-3 w-64 shrink-0 order-last">
    <button class="rside-close js-menu xl:hidden" aria-label="Close Table of Contents" type="button" aria-controls="rside" aria-expanded="false">
      <i class="i-lucide close"></i>
    </button>
    <div class="sy-scrollbar sy-rside-inner px-6 xl:top-16 xl:sticky xl:pl-0 pt-6 pb-4"><div class="localtoc"><h3>On this page</h3><ul>
<li><a class="reference internal" href="#decomposition">Decomposition</a><ul>
<li><a class="reference internal" href="#mango_time_series.exploratory_analysis.decomposition.SeasonalityDecompose"><code class="docutils literal notranslate"><span class="pre">SeasonalityDecompose</span></code></a><ul>
<li><a class="reference internal" href="#mango_time_series.exploratory_analysis.decomposition.SeasonalityDecompose.decompose_stl"><code class="docutils literal notranslate">decompose_stl()</span></code></a></li>
<li><a class="reference internal" href="#mango_time_series.exploratory_analysis.decomposition.SeasonalityDecompose.decompose_mstl"><code class="docutils literal notranslate">decompose_mstl()</span></code></a></li>
<li><a class="reference internal" href="#mango_time_series.exploratory_analysis.decomposition.SeasonalityDecompose.calculate_seasonal_strength"><code class="docutils literal notranslate">calculate_seasonal_strength()</span></code></a></li>
<li><a class="reference internal" href="#mango_time_series.exploratory_analysis.decomposition.SeasonalityDecompose.detect_seasonality"><code class="docutils literal notranslate">detect_seasonality()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-mango_time_series.exploratory_analysis.differentiation">Differentiation</a><ul>
<li><a class="reference internal" href="#mango_time_series.exploratory_analysis.differentiation.differentiate_target"><code class="docutils literal notranslate"><span class="pre">differentiate_target()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-mango_time_series.exploratory_analysis.heteroscedasticity">Heteroscedasticity</a><ul>
<li><a class="reference internal" href="#mango_time_series.exploratory_analysis.heteroscedasticity.get_optimal_lambda"><code class="docutils literal notranslate"><span class="pre">get_optimal_lambda()</span></code></a></li>
<li><a class="reference internal" href="#mango_time_series.exploratory_analysis.heteroscedasticity.apply_boxcox_with_lambda"><code class="docutils literal notranslate"><span class="pre">apply_boxcox_with_lambda()</span></code></a></li>
<li><a class="reference internal" href="#mango_time_series.exploratory_analysis.heteroscedasticity.detect_and_transform_heteroscedasticity"><code class="docutils literal notranslate"><span class="pre">detect_and_transform_heteroscedasticity()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#seasonal">Seasonal</a><ul>
<li><a class="reference internal" href="#mango_time_series.exploratory_analysis.seasonal.SeasonalityDetector"><code class="docutils literal notranslate"><span class="pre">SeasonalityDetector</span></code></a><ul>
<li><a class="reference internal" href="#mango_time_series.exploratory_analysis.seasonal.SeasonalityDetector.detect_significant_seasonality_acf"><code class="docutils literal notranslate">detect_significant_seasonality_acf()</span></code></a></li>
<li><a class="reference internal" href="#mango_time_series.exploratory_analysis.seasonal.SeasonalityDetector.detect_seasonality_periodogram"><code class="docutils literal notranslate">detect_seasonality_periodogram()</span></code></a></li>
<li><a class="reference internal" href="#mango_time_series.exploratory_analysis.seasonal.SeasonalityDetector.detect_seasonality"><code class="docutils literal notranslate">detect_seasonality()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#stationary">Stationary</a><ul>
<li><a class="reference internal" href="#mango_time_series.exploratory_analysis.stationary.StationaryTester"><code class="docutils literal notranslate"><span class="pre">StationaryTester</span></code></a><ul>
<li><a class="reference internal" href="#mango_time_series.exploratory_analysis.stationary.StationaryTester.test_adf"><code class="docutils literal notranslate">test_adf()</span></code></a></li>
<li><a class="reference internal" href="#mango_time_series.exploratory_analysis.stationary.StationaryTester.test_kpss"><code class="docutils literal notranslate">test_kpss()</span></code></a></li>
<li><a class="reference internal" href="#mango_time_series.exploratory_analysis.stationary.StationaryTester.make_stationary"><code class="docutils literal notranslate">make_stationary()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div><div id="ethical-ad-placement" data-ea-publisher="readthedocs"></div></div>
  </aside>
  <div class="rside-overlay js-menu" role="button" aria-label="Close Table of Contents" aria-controls="rside" aria-expanded="false"></div>
  <main class="sy-main w-full max-sm:max-w-full print:pt-6">
<div class="sy-breadcrumbs" role="navigation">
  <div class="sy-breadcrumbs-inner flex items-center">
    <div class="md:hidden mr-3">
      <button class="js-menu" aria-label="Menu" type="button" aria-controls="lside" aria-expanded="false">
        <i class="i-lucide menu"></i>
      </button>
    </div>
    <ol class="flex-1" itemscope itemtype="https://schema.org/BreadcrumbList"><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="../index.html"><span itemprop="name">mango</span></a>
        <span>/</span>
        <meta itemprop="position" content="1" />
      </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="index.html"><span itemprop="name">Mango time series code</span></a>
        <span>/</span>
        <meta itemprop="position" content="2" />
      </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <strong itemprop="name">Time series</strong>
        <meta itemprop="position" content="3" />
      </li></ol>
    <div class="xl:hidden ml-1">
      <button class="js-menu" aria-label="Show table of contents" type="button" aria-controls="rside"
        aria-expanded="false">
        <i class="i-lucide outdent"></i>
      </button>
    </div>
  </div>
</div><div class="flex flex-col break-words justify-between">
      <div class="min-w-0 max-w-6xl px-6 pb-6 pt-8 xl:px-12">
        <article class="yue" role="main">
          <section id="time-series">
<h1>Time series<a class="headerlink" href="#time-series" title="Link to this heading">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This documentation is still under development. If you find any bug or have any suggestion in time series, please, open an issue in the <a class="reference external" href="https://github.com/baobabsoluciones/mango">GitHub repository</a>.</p>
</div>
<section id="decomposition">
<h2>Decomposition<a class="headerlink" href="#decomposition" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="mango_time_series.exploratory_analysis.decomposition.SeasonalityDecompose">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mango_time_series.exploratory_analysis.decomposition.</span></span><span class="sig-name descname"><span class="pre">SeasonalityDecompose</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fs_threshold</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.64</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mango_time_series.exploratory_analysis.decomposition.SeasonalityDecompose" title="Link to this definition">¶</a></dt>
<dd><p>Class for time series decomposition and seasonality analysis.</p>
<p>Provides methods for decomposing time series into trend, seasonal, and residual
components using STL (Seasonal-Trend decomposition using LOESS) and MSTL
(Multiple Seasonal-Trend decomposition using LOESS) methods. Also includes
functionality for detecting heteroscedasticity and measuring seasonal strength.</p>
<dl class="py method">
<dt class="sig sig-object py" id="mango_time_series.exploratory_analysis.decomposition.SeasonalityDecompose.decompose_stl">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">decompose_stl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mango_time_series.exploratory_analysis.decomposition.SeasonalityDecompose.decompose_stl" title="Link to this definition">¶</a></dt>
<dd><p>Decompose time series using STL (Seasonal-Trend decomposition using LOESS).</p>
<p>Performs seasonal-trend decomposition using LOESS smoothing. Automatically
detects heteroscedasticity and applies appropriate transformation (Box-Cox)
if needed. Uses multiplicative decomposition for heteroscedastic series
and additive decomposition otherwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>series</strong> (<em>pandas.Series</em>) – Time series data to decompose</p></li>
<li><p><strong>period</strong> (<em>int</em>) – Seasonal period (e.g., 12 for monthly data with yearly seasonality)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple containing (trend, seasonal, residual) components</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple[pandas.Series, pandas.Series, pandas.Series]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mango_time_series.exploratory_analysis.decomposition.SeasonalityDecompose.decompose_mstl">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">decompose_mstl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">periods</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas.Series</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">pandas.Series</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">pandas.Series</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#mango_time_series.exploratory_analysis.decomposition.SeasonalityDecompose.decompose_mstl" title="Link to this definition">¶</a></dt>
<dd><p>Decompose time series using MSTL (Multiple Seasonal-Trend decomposition using LOESS).</p>
<p>Performs decomposition with multiple seasonal components simultaneously.
Automatically handles Box-Cox transformation for series with positive values
and uses standard decomposition for series with non-positive values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>series</strong> (<em>pandas.Series</em>) – Time series data to decompose</p></li>
<li><p><strong>periods</strong> (<em>list</em><em>[</em><em>int</em><em>]</em>) – List of seasonal periods to decompose (e.g., [12, 24] for monthly and bi-monthly seasonality)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple containing (trend, seasonal, residual) components</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple[pandas.Series, pandas.Series, pandas.Series]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mango_time_series.exploratory_analysis.decomposition.SeasonalityDecompose.calculate_seasonal_strength">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">calculate_seasonal_strength</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">seasonal</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resid</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="headerlink" href="#mango_time_series.exploratory_analysis.decomposition.SeasonalityDecompose.calculate_seasonal_strength" title="Link to this definition">¶</a></dt>
<dd><p>Calculate the seasonal strength (Fs) based on decomposition components.</p>
<p>Measures the strength of seasonality in the time series using the formula:
Fs = max(0, 1 - Var(Rt) / Var(St + Rt))</p>
<p>where:
- Rt is the residual component
- St is the seasonal component
- Var() represents variance</p>
<p>Values closer to 1 indicate stronger seasonality, while values closer to 0
indicate weaker or no seasonality.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>seasonal</strong> (<em>numpy.ndarray</em>) – Seasonal component from time series decomposition</p></li>
<li><p><strong>resid</strong> (<em>numpy.ndarray</em>) – Residual component from time series decomposition</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Seasonal strength value between 0 and 1</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mango_time_series.exploratory_analysis.decomposition.SeasonalityDecompose.detect_seasonality">
<span class="sig-name descname"><span class="pre">detect_seasonality</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="headerlink" href="#mango_time_series.exploratory_analysis.decomposition.SeasonalityDecompose.detect_seasonality" title="Link to this definition">¶</a></dt>
<dd><p>Detect if the time series has significant seasonality.</p>
<p>Performs STL decomposition and calculates seasonal strength to determine
if the series exhibits significant seasonality based on the configured
threshold (fs_threshold).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>series</strong> (<em>pandas.Series</em>) – Time series data to analyze for seasonality</p></li>
<li><p><strong>period</strong> (<em>int</em>) – Seasonal period to test (e.g., 12 for monthly data with yearly seasonality)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if seasonal strength exceeds the threshold, False otherwise</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
<dl>
<dt>Example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="gp">&gt;&gt;&gt; </span><span class="n">decomposer</span> <span class="o">=</span> <span class="n">SeasonalityDecompose</span><span class="p">(</span><span class="n">fs_threshold</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
</span><span data-line="2"><span class="gp">&gt;&gt;&gt; </span><span class="n">has_seasonality</span> <span class="o">=</span> <span class="n">decomposer</span><span class="o">.</span><span class="n">detect_seasonality</span><span class="p">(</span><span class="n">monthly_data</span><span class="p">,</span> <span class="n">period</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
</span></pre></div>
</div>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-mango_time_series.exploratory_analysis.differentiation">
<span id="differentiation"></span><h2>Differentiation<a class="headerlink" href="#module-mango_time_series.exploratory_analysis.differentiation" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="mango_time_series.exploratory_analysis.differentiation.differentiate_target">
<span class="sig-prename descclassname"><span class="pre">mango_time_series.exploratory_analysis.differentiation.</span></span><span class="sig-name descname"><span class="pre">differentiate_target</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">group_cols</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lag</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">polars.DataFrame</span></span></span><a class="headerlink" href="#mango_time_series.exploratory_analysis.differentiation.differentiate_target" title="Link to this definition">¶</a></dt>
<dd><p>Differentiate the target variable by applying lag-based differencing.</p>
<p>Performs time series differentiation by calculating the difference between
the current value and the value at the specified lag. This is useful for
making non-stationary time series stationary by removing trends and
seasonality. The original target values are preserved as ‘y_orig’ and
‘y_orig_lagged’ columns for reference.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>polars.DataFrame</em>) – Input DataFrame containing time series data</p></li>
<li><p><strong>group_cols</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – List of column names to group by for differentiation</p></li>
<li><p><strong>lag</strong> (<em>int</em>) – Number of periods to lag for differentiation</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>DataFrame with differentiated target variable and original values preserved</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>polars.DataFrame</p>
</dd>
</dl>
<dl>
<dt>Note:</dt><dd><ul class="simple">
<li><p>The DataFrame is sorted by ‘datetime’ column before processing</p></li>
<li><p>Rows with null values in the differentiated target are removed</p></li>
<li><p>Original target values are preserved in ‘y_orig’ and ‘y_orig_lagged’ columns</p></li>
</ul>
</dd>
<dt>Example:</dt><dd><div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pl</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
</span><span data-line="2"><span class="gp">... </span>    <span class="s2">&quot;datetime&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;2023-01-01&quot;</span><span class="p">,</span> <span class="s2">&quot;2023-01-02&quot;</span><span class="p">,</span> <span class="s2">&quot;2023-01-03&quot;</span><span class="p">],</span>
</span><span data-line="3"><span class="gp">... </span>    <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">120</span><span class="p">],</span>
</span><span data-line="4"><span class="gp">... </span>    <span class="s2">&quot;group&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">]</span>
</span><span data-line="5"><span class="gp">... </span><span class="p">})</span>
</span><span data-line="6"><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">differentiate_target</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;group&quot;</span><span class="p">],</span> <span class="n">lag</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</span></pre></div>
</div>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-mango_time_series.exploratory_analysis.heteroscedasticity">
<span id="heteroscedasticity"></span><h2>Heteroscedasticity<a class="headerlink" href="#module-mango_time_series.exploratory_analysis.heteroscedasticity" title="Link to this heading">¶</a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="mango_time_series.exploratory_analysis.heteroscedasticity.get_optimal_lambda">
<span class="sig-prename descclassname"><span class="pre">mango_time_series.exploratory_analysis.heteroscedasticity.</span></span><span class="sig-name descname"><span class="pre">get_optimal_lambda</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="headerlink" href="#mango_time_series.exploratory_analysis.heteroscedasticity.get_optimal_lambda" title="Link to this definition">¶</a></dt>
<dd><p>Calculate the optimal Box-Cox lambda parameter for transformation.</p>
<p>Uses the boxcox_normmax function to find the lambda value that maximizes
the normality of the transformed data. Automatically handles negative values
by shifting the series to ensure all values are positive before transformation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>series</strong> (<em>numpy.ndarray</em>) – Time series data to find optimal lambda for</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Optimal lambda value for Box-Cox transformation</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
<dl class="simple">
<dt>Note:</dt><dd><p>If the series contains negative values, it is automatically shifted
to ensure all values are positive before calculating lambda.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mango_time_series.exploratory_analysis.heteroscedasticity.apply_boxcox_with_lambda">
<span class="sig-prename descclassname"><span class="pre">mango_time_series.exploratory_analysis.heteroscedasticity.</span></span><span class="sig-name descname"><span class="pre">apply_boxcox_with_lambda</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lambda_value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">numpy.ndarray</span></span></span><a class="headerlink" href="#mango_time_series.exploratory_analysis.heteroscedasticity.apply_boxcox_with_lambda" title="Link to this definition">¶</a></dt>
<dd><p>Apply Box-Cox transformation using a specified lambda value.</p>
<p>Transforms the time series data using the Box-Cox power transformation
with the provided lambda parameter. Automatically handles negative values
by shifting the series to ensure all values are positive before transformation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>series</strong> (<em>numpy.ndarray</em>) – Time series data to transform</p></li>
<li><p><strong>lambda_value</strong> (<em>float</em>) – Lambda parameter for Box-Cox transformation</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Transformed time series data</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>numpy.ndarray</p>
</dd>
</dl>
<dl class="simple">
<dt>Note:</dt><dd><p>If the series contains negative values, it is automatically shifted
to ensure all values are positive before applying the transformation.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="mango_time_series.exploratory_analysis.heteroscedasticity.detect_and_transform_heteroscedasticity">
<span class="sig-prename descclassname"><span class="pre">mango_time_series.exploratory_analysis.heteroscedasticity.</span></span><span class="sig-name descname"><span class="pre">detect_and_transform_heteroscedasticity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#mango_time_series.exploratory_analysis.heteroscedasticity.detect_and_transform_heteroscedasticity" title="Link to this definition">¶</a></dt>
<dd><p>Detect heteroscedasticity and apply Box-Cox transformation if needed.</p>
<p>Performs the Breusch-Pagan test to detect heteroscedasticity (non-constant variance)
in the time series. If heteroscedasticity is detected (p-value &lt; 0.05), applies
Box-Cox transformation to stabilize the variance. Returns the original series
if no transformation is needed or if the series contains non-positive values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>series</strong> (<em>numpy.ndarray</em>) – Time series data to analyze and potentially transform</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple containing (transformed_series, lambda_value)
- transformed_series: Original or transformed time series
- lambda_value: Lambda used for transformation, or None if no transformation applied</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple[numpy.ndarray, float or None]</p>
</dd>
</dl>
<dl class="simple">
<dt>Raises:</dt><dd><p>ValueError: If the time series contains only one data point</p>
</dd>
<dt>Note:</dt><dd><ul class="simple">
<li><p>Series with zeros or negative values are not transformed</p></li>
<li><p>Uses Breusch-Pagan test with significance level of 0.05</p></li>
<li><p>Logs the test results and transformation decisions</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
<section id="seasonal">
<h2>Seasonal<a class="headerlink" href="#seasonal" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="mango_time_series.exploratory_analysis.seasonal.SeasonalityDetector">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mango_time_series.exploratory_analysis.seasonal.</span></span><span class="sig-name descname"><span class="pre">SeasonalityDetector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">threshold_acf</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">percentile_periodogram</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">99</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mango_time_series.exploratory_analysis.seasonal.SeasonalityDetector" title="Link to this definition">¶</a></dt>
<dd><p>Detector for identifying seasonal patterns in time series data.</p>
<p>Combines autocorrelation function (ACF) analysis and periodogram analysis
to detect and validate seasonal patterns in time series. Uses configurable
thresholds to determine significance of detected patterns.</p>
<dl class="py method">
<dt class="sig sig-object py" id="mango_time_series.exploratory_analysis.seasonal.SeasonalityDetector.detect_significant_seasonality_acf">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">detect_significant_seasonality_acf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_lag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">366</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">acf_threshold</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_repetitions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="headerlink" href="#mango_time_series.exploratory_analysis.seasonal.SeasonalityDetector.detect_significant_seasonality_acf" title="Link to this definition">¶</a></dt>
<dd><p>Detect significant seasonality using autocorrelation function analysis.</p>
<p>Analyzes the time series using ACF to identify seasonal patterns by finding
local maxima in autocorrelation values. Validates detected periods by ensuring
sufficient repetitions at period multiples, indicating true seasonality.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ts</strong> (<em>numpy.ndarray</em>) – Time series data to analyze</p></li>
<li><p><strong>max_lag</strong> (<em>int</em>) – Maximum lag for ACF analysis (default: 366 for yearly seasonality)</p></li>
<li><p><strong>acf_threshold</strong> (<em>float</em>) – ACF threshold for significant peaks (default: 0.2)</p></li>
<li><p><strong>min_repetitions</strong> (<em>int</em>) – Minimum significant multiples for valid seasonality (default: 2)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Most significant seasonal period, or 0 if none detected</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
<dl class="simple">
<dt>Note:</dt><dd><ul class="simple">
<li><p>Identifies local maxima in ACF values as potential seasonal periods</p></li>
<li><p>Filters peaks above the ACF threshold and confidence intervals</p></li>
<li><p>Validates periods by checking for significant ACF values at multiples</p></li>
<li><p>Returns 0 if no valid seasonality pattern is found</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mango_time_series.exploratory_analysis.seasonal.SeasonalityDetector.detect_seasonality_periodogram">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">detect_seasonality_periodogram</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_period</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_period</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">365</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#mango_time_series.exploratory_analysis.seasonal.SeasonalityDetector.detect_seasonality_periodogram" title="Link to this definition">¶</a></dt>
<dd><p>Detect seasonality using periodogram analysis.</p>
<p>Analyzes the power spectral density of the time series to identify
significant periodic components. Filters periods within specified range,
applies strict percentile thresholds, and refines peaks to avoid
redundant multiples while keeping only near-integer periods.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ts</strong> (<em>numpy.ndarray</em>) – Time series data to analyze</p></li>
<li><p><strong>min_period</strong> (<em>int</em>) – Minimum period to consider (default: 2)</p></li>
<li><p><strong>max_period</strong> (<em>int</em>) – Maximum period to consider (default: 365)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple containing:
- List of detected seasonal periods
- Array of filtered periods
- Array of filtered power spectrum values</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple[list, numpy.ndarray, numpy.ndarray]</p>
</dd>
</dl>
<dl class="simple">
<dt>Note:</dt><dd><ul class="simple">
<li><p>Uses 99th percentile threshold for peak detection</p></li>
<li><p>Refines peaks by ensuring sufficient power difference (1.5x)</p></li>
<li><p>Removes redundant multiples of detected periods</p></li>
<li><p>Keeps only periods close to integers (tolerance: 0.05)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mango_time_series.exploratory_analysis.seasonal.SeasonalityDetector.detect_seasonality">
<span class="sig-name descname"><span class="pre">detect_seasonality</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_lag</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">366</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span></span></span><a class="headerlink" href="#mango_time_series.exploratory_analysis.seasonal.SeasonalityDetector.detect_seasonality" title="Link to this definition">¶</a></dt>
<dd><p>Detect seasonality using combined ACF and periodogram analysis.</p>
<p>Implements a two-step approach for robust seasonality detection:
1. Uses ACF analysis to confirm the presence of seasonality
2. Uses periodogram analysis to identify specific seasonal periods</p>
<p>This combination prevents false positives from periodogram analysis
while ensuring accurate identification of true seasonal patterns.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ts</strong> (<em>numpy.ndarray</em>) – Time series data to analyze</p></li>
<li><p><strong>max_lag</strong> (<em>int</em>) – Maximum lag for ACF analysis (default: 366 for yearly seasonality)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Sorted list of detected seasonal periods, empty if none found</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
<dl class="simple">
<dt>Note:</dt><dd><ul class="simple">
<li><p>ACF analysis validates the presence of seasonality</p></li>
<li><p>Periodogram analysis identifies specific periods</p></li>
<li><p>Automatically adjusts max_lag based on time series length</p></li>
<li><p>Combines results from both methods, removing duplicates</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="stationary">
<h2>Stationary<a class="headerlink" href="#stationary" title="Link to this heading">¶</a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="mango_time_series.exploratory_analysis.stationary.StationaryTester">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mango_time_series.exploratory_analysis.stationary.</span></span><span class="sig-name descname"><span class="pre">StationaryTester</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.05</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fs_threshold</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.64</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#mango_time_series.exploratory_analysis.stationary.StationaryTester" title="Link to this definition">¶</a></dt>
<dd><p>Tester for making time series stationary through differencing.</p>
<p>Implements a comprehensive approach to stationarity testing and transformation
using ADF and KPSS tests combined with seasonal strength analysis. Applies
regular and seasonal differencing iteratively until the series becomes
stationary in both trend and seasonal components.</p>
<dl class="py method">
<dt class="sig sig-object py" id="mango_time_series.exploratory_analysis.stationary.StationaryTester.test_adf">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">test_adf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.Series</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span></span></span><a class="headerlink" href="#mango_time_series.exploratory_analysis.stationary.StationaryTester.test_adf" title="Link to this definition">¶</a></dt>
<dd><p>Test stationarity using the Augmented Dickey-Fuller test.</p>
<p>Performs the ADF test to determine if the time series is stationary.
The null hypothesis is that the series has a unit root (non-stationary).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>series</strong> (<em>pandas.Series</em>) – Time series data to test</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>P-value of the ADF test</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
<dl class="simple">
<dt>Note:</dt><dd><ul class="simple">
<li><p>p-value &lt; 0.05 typically indicates stationarity</p></li>
<li><p>Lower p-values suggest stronger evidence against unit root</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mango_time_series.exploratory_analysis.stationary.StationaryTester.test_kpss">
<em class="property"><span class="pre">static</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">test_kpss</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pandas.Series</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="headerlink" href="#mango_time_series.exploratory_analysis.stationary.StationaryTester.test_kpss" title="Link to this definition">¶</a></dt>
<dd><p>Test stationarity using the KPSS test.</p>
<p>Performs the KPSS test to determine if the time series is stationary.
The null hypothesis is that the series is stationary around a constant.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>series</strong> (<em>pandas.Series</em>) – Time series data to test</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>P-value of the KPSS test, or None if test fails</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>float or None</p>
</dd>
</dl>
<dl class="simple">
<dt>Note:</dt><dd><ul class="simple">
<li><p>p-value &lt; 0.05 typically indicates non-stationarity</p></li>
<li><p>Handles InterpolationWarning and returns None on errors</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mango_time_series.exploratory_analysis.stationary.StationaryTester.make_stationary">
<span class="sig-name descname"><span class="pre">make_stationary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">polars.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">date_column</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas.DataFrame</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#mango_time_series.exploratory_analysis.stationary.StationaryTester.make_stationary" title="Link to this definition">¶</a></dt>
<dd><p>Transform time series to make it stationary in trend and seasonal components.</p>
<p>Main function that implements a comprehensive approach to making time series
stationary through iterative application of regular and seasonal differencing.
Uses ADF and KPSS tests combined with seasonal strength analysis to determine
the appropriate transformations.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>polars.DataFrame</em>) – Input Polars DataFrame containing time series data</p></li>
<li><p><strong>target_column</strong> (<em>str</em>) – Name of the column containing time series values</p></li>
<li><p><strong>date_column</strong> (<em>str</em>) – Name of the column containing dates</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple containing (transformed_DataFrame, regular_differencing_steps, seasonal_differencing_steps)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple[pandas.DataFrame, int, int]</p>
</dd>
</dl>
<dl class="simple">
<dt>Note:</dt><dd><ul class="simple">
<li><p>Returns original data if already stationary</p></li>
<li><p>Applies regular differencing first, then seasonal differencing</p></li>
<li><p>Logs final differencing parameters for reference</p></li>
<li><p>Converts Polars DataFrame to Pandas for processing</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>

        </article><button class="back-to-top" type="button">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
  </svg>
  <span>Back to top</span>
</button><div class="navigation flex print:hidden"><div class="navigation-prev">
    <a href="index.html">
      <i class="i-lucide chevron-left"></i>
      <div class="page-info">
        <span>Previous</span><div class="title">Mango time series code</div></div>
    </a>
  </div><div class="navigation-next">
    <a href="utils.html">
      <div class="page-info">
        <span>Next</span>
        <div class="title">Utils</div>
      </div>
      <i class="i-lucide chevron-right"></i>
    </a>
  </div></div></div>
    </div>
  </main>
</div>
<footer class="sy-foot">
  <div class="sy-foot-inner sy-container mx-auto">
    <div class="sy-foot-reserved md:flex justify-between items-center">
      <div class="sy-foot-copyright"><p>2023, baobab soluciones</p>
  
  <p>
    Made with
    
    <a href="https://www.sphinx-doc.org/">Sphinx</a> and
    
    <a href="https://shibuya.lepture.com">Shibuya theme</a>.
  </p>
</div>
      <div class="sy-foot-socials"></div>
    </div>
  </div>
</footer>
      <script src="../_static/documentation_options.js?v=072b7ed8"></script>
      <script src="../_static/doctools.js?v=888ff710"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/shibuya.js?v=c477d091"></script></body>
</html>